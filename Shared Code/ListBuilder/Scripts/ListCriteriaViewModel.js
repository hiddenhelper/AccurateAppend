var AccurateAppend;
(function (AccurateAppend) {
    var ListBuilder;
    (function (ListBuilder) {
        var ListCriteriaViewModel = (function () {
            function ListCriteriaViewModel(urls, requestid) {
                var _this = this;
                this.urls = urls;
                this.addExactAge = function (data, event) {
                    console.log("addExactAge called");
                    var target = event.target || event.srcElement;
                    var taregtValue = $(target.parentNode).find("#exactAge").val();
                    $(target.parentNode).find("#alertMessage").remove();
                    if (taregtValue < 18) {
                        $(target.parentNode)
                            .append("<div style='color: red; margin-top: 15px;' id=\"alertMessage\">Age must be 18 or older.</div>");
                        return false;
                    }
                    if (ko.utils.arrayFirst(viewModel1.listCriteriaViewModel.exactAges(), function (item) { return item.name === taregtValue; })) {
                        $(target.parentNode)
                            .append("<div style='color: red; margin-top: 15px;' id=\"alertMessage\">The exact age " + taregtValue + " has already been added.</div>");
                        return false;
                    }
                    _this.exactAges.push(new ListBuilder.ValueLabel(taregtValue, taregtValue + " years old"));
                    $(target.parentNode).find("#exactAge").val("");
                    _this.updateCount();
                };
                this.addDobRange = function (data, event) {
                    var target = event.target || event.srcElement;
                    $(target.parentNode).find("#alertMessage").remove();
                    var dobStart = new ListBuilder.Dob($(target.parentNode).find("#dob_start").val());
                    var dobEnd = new ListBuilder.Dob($(target.parentNode).find("#dob_end").val());
                    var dobRange = new ListBuilder.DobRange(dobStart, dobEnd);
                    var validation = dobRange.isValid();
                    if (!validation.result) {
                        $(target.parentNode).append("<div style='color: red; margin-top: 15px;' id=\"alertMessage\">" + validation.message + "</div>");
                        return false;
                    }
                    if (ko.utils.arrayFirst(viewModel1.listCriteriaViewModel.dobRanges(), function (item) { return item.toString() === dobRange.toString(); })) {
                        $(target.parentNode)
                            .append("<div style='color: red; margin-top: 15px;' id=\"alertMessage\">The dob range " + dobRange.toString() + " has already been added.</div>");
                        return false;
                    }
                    _this.dobRanges.push(new ListBuilder.DobRange(dobStart, dobEnd));
                    $(target.parentNode).find("#dob_start").val("");
                    $(target.parentNode).find("#dob_end").val("");
                    _this.updateCount();
                };
                this.addZips = function (event, vm) {
                    var target = event.target || event.srcElement;
                    var lines = $(event.target).val().split("\n");
                    var _loop_1 = function (i) {
                        var inputZip = lines[i].trim();
                        if (/^\d{5}$|^\d{5}$/.test(inputZip)) {
                            if (jQuery.grep(_this.zips(), function (a) { return a.name === inputZip; }).length === 0)
                                _this.zips.push(new ListBuilder.Zip(inputZip, new ListBuilder.State("", 0)));
                            return "continue";
                        }
                    };
                    for (var i = 0; i < lines.length; i++) {
                        _loop_1(i);
                    }
                    if (_this.zips().length === 0) {
                        $(target.parentNode)
                            .append("<div style='color: red; margin-top: 15px;' id=\"alertMessage\">Zips seems to be empty.</div>");
                        return false;
                    }
                    _this.updateCount();
                };
                this.requestId = ko.observable(requestid);
                this.count = ko.observable(0);
                this.states = ko.observableArray([]);
                this.counties = ko.observableArray([]);
                this.zips = ko.observableArray([]);
                this.cities = ko.observableArray([]);
                this.timeZones = ko.observableArray([]);
                this.ageRanges = ko.observableArray([]);
                this.exactAges = ko.observableArray([]);
                this.dobRanges = ko.observableArray([]);
                this.gender = ko.observableArray([]);
                this.maritalStatus = ko.observableArray([]);
                this.languages = ko.observableArray([]);
                this.hoh = ko.observableArray([]);
                this.estIncome = ko.observableArray([]);
                this.netWorth = ko.observableArray([]);
                this.homeValue = ko.observableArray([]);
                this.ownRent = ko.observableArray([]);
                this.investmentEstimatedResidentialPropertiesOwned = ko.observableArray([]);
                this.lengthOfResidence = ko.observableArray([]);
                this.numberOfAdults = ko.observableArray([]);
                this.ageRangesMale = ko.observableArray([]);
                this.ageRangesFemale = ko.observableArray([]);
                this.ageRangesUnknown = ko.observableArray([]);
                this.investments = ko.observableArray([]);
                this.businessOwner = ko.observableArray([]);
                this.education = ko.observableArray([]);
                this.occupationGeneral = ko.observableArray([]);
                this.occupationDetailed = ko.observableArray([]);
                this.donates = ko.observableArray([]);
                this.interestsPurchases = ko.observableArray([]);
                this.interestsReadingGeneral = ko.observableArray([]);
                this.interestsReadingMagazinesAndSubscriptions = ko.observableArray([]);
                this.interestsSports = ko.observableArray([]);
                this.interestsFitness = ko.observableArray([]);
                this.interestsOutdoors = ko.observableArray([]);
            }
            ListCriteriaViewModel.prototype.data = function () {
                return {
                    requestId: this.requestId,
                    states: this.states,
                    counties: this.counties,
                    zips: this.zips,
                    cities: this.cities,
                    timeZones: this.timeZones,
                    ageRanges: this.ageRanges,
                    exactAges: this.exactAges,
                    dobRanges: this.dobRanges,
                    gender: this.gender,
                    maritalStatus: this.maritalStatus,
                    languages: this.languages,
                    hoh: this.hoh,
                    estIncome: this.estIncome,
                    netWorth: this.netWorth,
                    homeValue: this.homeValue,
                    ownRent: this.ownRent,
                    investmentEstimatedResidentialPropertiesOwned: this.investmentEstimatedResidentialPropertiesOwned,
                    lengthOfResidence: this.lengthOfResidence,
                    numberOfAdults: this.numberOfAdults,
                    ageRangesMale: this.ageRangesMale,
                    ageRangesFemale: this.ageRangesFemale,
                    ageRangesUnknown: this.ageRangesUnknown,
                    investments: this.investments,
                    businessOwner: this.businessOwner,
                    education: this.education,
                    occupationGeneral: this.occupationGeneral,
                    occupationDetailed: this.occupationDetailed,
                    donates: this.donates,
                    interestsPurchases: this.interestsPurchases,
                    interestsReadingGeneral: this.interestsReadingGeneral,
                    interestsReadingMagazinesAndSubscriptions: this.interestsReadingMagazinesAndSubscriptions,
                    interestsSports: this.interestsSports,
                    interestsFitness: this.interestsFitness,
                    interestsOutdoors: this.interestsOutdoors
                };
            };
            ListCriteriaViewModel.prototype.toggle = function (e) {
                var name = e.currentTarget.name;
                var coll = this[name];
                var obj;
                switch (e.currentTarget.type) {
                    case "select-one":
                        var value = $(e.currentTarget).find("option:selected").val();
                        coll.removeAll();
                        if (value) {
                            obj = JSON.parse(value);
                            coll.removeAll();
                            coll.push(obj);
                        }
                        break;
                    default:
                        obj = JSON.parse(e.currentTarget.value);
                        if (e.currentTarget.checked) {
                            coll.push(obj);
                        }
                        else {
                            coll.remove(function (item) { return item.id === obj.id; });
                            $(e.view.document).find("#" + obj.id).prop("checked", false);
                            $(e.view.document).find("[name=" + name + "] option[value=\"\"]").prop("selected", true);
                        }
                        break;
                }
                this.updateCount();
            };
            ListCriteriaViewModel.prototype.removeAllItems = function () {
                this.count(0);
            };
            ListCriteriaViewModel.prototype.updateCount = function () {
                console.log("updateCount called");
                var self = this;
                console.log(ko.toJSON(this.data()));
                $("#updateCountLoading").show();
                $.ajax({
                    type: "POST",
                    url: this.getUrl("GenerateListCount"),
                    data: { listCriteria: ko.toJSON(this.data()) },
                    success: function (response) {
                        console.log(ko.toJSON(response));
                        if (response.HttpStatusCodeResult === 200) {
                            self.count(response.Count);
                        }
                        else if (response.HttpStatusCodeResult === 400) {
                            self.count(response.Count);
                        }
                        else {
                            self.count(response.Count);
                        }
                        $("#updateCountLoading").hide();
                    }
                });
                return true;
            };
            ListCriteriaViewModel.prototype.getUrl = function (urlName) {
                var match = jQuery.grep(this.urls, function (n) { return n.name === urlName; });
                return match[0].url;
            };
            return ListCriteriaViewModel;
        }());
        ListBuilder.ListCriteriaViewModel = ListCriteriaViewModel;
    })(ListBuilder = AccurateAppend.ListBuilder || (AccurateAppend.ListBuilder = {}));
})(AccurateAppend || (AccurateAppend = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGlzdENyaXRlcmlhVmlld01vZGVsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiTGlzdENyaXRlcmlhVmlld01vZGVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLElBQU8sY0FBYyxDQXFicEI7QUFyYkQsV0FBTyxjQUFjO0lBQUMsSUFBQSxXQUFXLENBcWJoQztJQXJicUIsV0FBQSxXQUFXO1FBRTdCO1lBaURJLCtCQUFtQixJQUFnQixFQUFFLFNBQWlCO2dCQUF0RCxpQkE4Q0M7Z0JBOUNrQixTQUFJLEdBQUosSUFBSSxDQUFZO2dCQW1UbkMsZ0JBQVcsR0FBRyxVQUFDLElBQVMsRUFBRSxLQUFVO29CQUNoQyxPQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLENBQUM7b0JBQ2xDLElBQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLElBQUksS0FBSyxDQUFDLFVBQVUsQ0FBQztvQkFDaEQsSUFBTSxXQUFXLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7b0JBQ2pFLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO29CQUVwRCxJQUFJLFdBQVcsR0FBRyxFQUFFLEVBQUU7d0JBQ2xCLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDOzZCQUNmLE1BQU0sQ0FDSCwrRkFBNkYsQ0FBQyxDQUFDO3dCQUN2RyxPQUFPLEtBQUssQ0FBQztxQkFDaEI7b0JBRUQsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMscUJBQXFCLENBQUMsU0FBUyxFQUFFLEVBQUUsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLENBQUMsSUFBSSxLQUFLLFdBQVcsRUFBekIsQ0FBeUIsQ0FBQyxFQUFFO3dCQUN0RyxDQUFDLENBQUMsTUFB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QyxFQUFFLENBQUMsQ0FBQztnQkFDckMsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUN2QyxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ25DLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDckMsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUd4QyxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ3hDLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDeEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUN4QyxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ3JDLElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDNUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUN4QyxJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBR2xDLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDeEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUN2QyxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ3hDLElBQUksQ0FB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LENBQUMsSUFBSSxFQUFFLFVBQUMsQ0FBQyxJQUFLLE9BQUEsQ0FBQyxDQUFDLElBQUksS0FBSyxPQUFPLEVBQWxCLENBQWtCLENBQUMsQ0FBQztnQkFDaEUsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1lBQ3hCLENBQUM7WUFDTCw0QkFBQztRQUFELENBQUMsQUFsYkQsSUFrYkM7UUFsYlksaUNBQXFCLHdCQWtiakMsQ0FBQTtJQUNMLENBQUMsRUFyYnFCLFdBQVcsR0FBWCwwQkFBVyxLQUFYLDBCQUFXLFFBcWJoQztBQUFELENBQUMsRUFyYk0sY0FBYyxLQUFkLGNBQWMsUUFxYnBCIiwic291cmNlc0NvbnRlbnQiOlsiZGVjbGFyZSBsZXQgbGlzdENyaXRlcmlhVmlld01vZGVsOiBBY2N1cmF0ZUFwcGVuZC5MaXN0QnVpbGRlci5MaXN0Q3JpdGVyaWFWaWV3TW9kZWw7XHJcblxyXG5tb2R1bGUgQWNjdXJhdGVBcHBlbmQuTGlzdEJ1aWxkZXIge1xyXG4gICBcclxuICAgIGV4cG9ydCBjbGFzcyBMaXN0Q3JpdGVyaWFWaWV3TW9kZWwge1xyXG5cclxuICAgICAgICByZXF1ZXN0SWQ6IEtub2Nrb3V0T2JzZXJ2YWJsZTxzdHJpbmc+O1xyXG4gICAgICAgIC8vIEVTVElNQVRFRCBMSVNUIFJFQ09SRCBDT1VOVFxyXG4gICAgICAgIGNvdW50OiBLbm9ja291dE9ic2VydmFibGU8bnVtYmVyPjtcclxuICAgICAgXHJcbiAgICAgICAgLy8gR0VPR1JBUEhZXHJcbiAgICAgICAgc3RhdGVzOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxTdGF0ZT47XHJcbiAgICAgICAgY291bnRpZXM6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PENvdW50eT47XHJcbiAgICAgICAgemlwczogS25vY2tvdXRPYnNlcnZhYmxlQXJyYXk8WmlwPjtcclxuICAgICAgICBjaXRpZXM6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PENpdHk+O1xyXG4gICAgICAgIHRpbWVab25lczogS25vY2tvdXRPYnNlcnZhYmxlQXJyYXk8TGlzdEJ1aWxkZXIuVmFsdWVMYWJlbD47XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gREVNT0dSQVBISUNTXHJcbiAgICAgICAgYWdlUmFuZ2VzOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxMaXN0QnVpbGRlci5WYWx1ZUxhYmVsPjtcclxuICAgICAgICBkb2JSYW5nZXM6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PERvYlJhbmdlPjsgXHJcbiAgICAgICAgZXhhY3RBZ2VzOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxMaXN0QnVpbGRlci5WYWx1ZUxhYmVsPjtcclxuICAgICAgICBnZW5kZXI6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIG1hcml0YWxTdGF0dXM6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIGhvaDogS25vY2tvdXRPYnNlcnZhYmxlQXJyYXk8TGlzdEJ1aWxkZXIuVmFsdWVMYWJlbD47XHJcbiAgICAgICAgbGFuZ3VhZ2VzOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxMaXN0QnVpbGRlci5WYWx1ZUxhYmVsPjtcclxuXHJcbiAgICAgICAgLy8gSE9VU0lORyAmIEZJTkFOQ0VcclxuICAgICAgICBuZXRXb3J0aDogS25vY2tvdXRPYnNlcnZhYmxlQXJyYXk8TGlzdEJ1aWxkZXIuVmFsdWVMYWJlbD47XHJcbiAgICAgICAgZXN0SW5jb21lOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxMaXN0QnVpbGRlci5WYWx1ZUxhYmVsPjtcclxuICAgICAgICBob21lVmFsdWU6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIG93blJlbnQ6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIGludmVzdG1lbnRFc3RpbWF0ZWRSZXNpZGVudGlhbFByb3BlcnRpZXNPd25lZDogS25vY2tvdXRPYnNlcnZhYmxlQXJyYXk8TGlzdEJ1aWxkZXIuVmFsdWVMYWJlbD47XHJcbiAgICAgICAgbGVuZ3RoT2ZSZXNpZGVuY2U6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIGhvdXNlaG9sZFNpemU6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIG51bWJlck9mQWR1bHRzOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxMaXN0QnVpbGRlci5WYWx1ZUxhYmVsPjtcclxuICAgICAgICBhZ2VSYW5nZXNNYWxlOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxMaXN0QnVpbGRlci5WYWx1ZUxhYmVsPjtcclxuICAgICAgICBhZ2VSYW5nZXNGZW1hbGU6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIGFnZVJhbmdlc1Vua25vd246IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIGludmVzdG1lbnRzOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxMaXN0QnVpbGRlci5WYWx1ZUxhYmVsPjtcclxuICAgICAgICBidXNpbmVzc093bmVyOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxMaXN0QnVpbGRlci5WYWx1ZUxhYmVsPjtcclxuICAgICAgICBlZHVjYXRpb246IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIG9jY3VwYXRpb25HZW5lcmFsOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxMaXN0QnVpbGRlci5WYWx1ZUxhYmVsPjtcclxuICAgICAgICBvY2N1cGF0aW9uRGV0YWlsZWQ6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIGRvbmF0ZXM6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIElOVEVSRVNUU1xyXG4gICAgICAgIGludGVyZXN0c1B1cmNoYXNlczogS25vY2tvdXRPYnNlcnZhYmxlQXJyYXk8TGlzdEJ1aWxkZXIuVmFsdWVMYWJlbD47XHJcbiAgICAgICAgaW50ZXJlc3RzUmVhZGluZ0dlbmVyYWw6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIGludGVyZXN0c1JlYWRpbmdNYWdhemluZXNBbmRTdWJzY3JpcHRpb25zOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxMaXN0QnVpbGRlci5WYWx1ZUxhYmVsPjtcclxuICAgICAgICBpbnRlcmVzdHNTcG9ydHM6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIGludGVyZXN0c0ZpdG5lc3M6IEtub2Nrb3V0T2JzZXJ2YWJsZUFycmF5PExpc3RCdWlsZGVyLlZhbHVlTGFiZWw+O1xyXG4gICAgICAgIGludGVyZXN0c091dGRvb3JzOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxMaXN0QnVpbGRlci5WYWx1ZUxhYmVsPjtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IocHVibGljIHVybHM6IEFycmF5PFVybD4sIHJlcXVlc3RpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdElkID0ga28ub2JzZXJ2YWJsZShyZXF1ZXN0aWQpO1xyXG4gICAgICAgICAgICB0aGlzLmNvdW50ID0ga28ub2JzZXJ2YWJsZSgwKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEdFT0dSQVBIWVxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlcyA9IGtvLm9ic2VydmFibGVBcnJheShbXSk7XHJcbiAgICAgICAgICAgIHRoaXMuY291bnRpZXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gICAgICAgICAgICB0aGlzLnppcHMgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gICAgICAgICAgICB0aGlzLmNpdGllcyA9IGtvLm9ic2VydmFibGVBcnJheShbXSk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZVpvbmVzID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuXHJcbiAgICAgICAgICAgIC8vIERFTU9HUkFISUNTXHJcbiAgICAgICAgICAgIHRoaXMuYWdlUmFuZ2VzID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgICAgICAgICAgdGhpcy5leGFjdEFnZXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gICAgICAgICAgICB0aGlzLmRvYlJhbmdlcyA9IGtvLm9ic2VydmFibGVBcnJheShbXSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZGVyID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgICAgICAgICAgdGhpcy5tYXJpdGFsU3RhdHVzID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgICAgICAgICAgdGhpcy5sYW5ndWFnZXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gICAgICAgICAgICB0aGlzLmhvaCA9IGtvLm9ic2VydmFibGVBcnJheShbXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEhPVVNJTkcgJiBGSU5BTkNFXHJcbiAgICAgICAgICAgIHRoaXMuZXN0SW5jb21lID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgICAgICAgICAgdGhpcy5uZXRXb3J0aCA9IGtvLm9ic2VydmFibGVBcnJheShbXSk7XHJcbiAgICAgICAgICAgIHRoaXMuaG9tZVZhbHVlID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgICAgICAgICAgdGhpcy5vd25SZW50ID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgICAgICAgICAgdGhpcy5pbnZlc3RtZW50RXN0aW1hdGVkUmVzaWRlbnRpYWxQcm9wZXJ0aWVzT3duZWQgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gICAgICAgICAgICB0aGlzLmxlbmd0aE9mUmVzaWRlbmNlID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgICAgICAgICAgLy90aGlzLmhvdXNlaG9sZFNpemUgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gICAgICAgICAgICB0aGlzLm51bWJlck9mQWR1bHRzID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgICAgICAgICAgdGhpcy5hZ2VSYW5nZXNNYWxlID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgICAgICAgICAgdGhpcy5hZ2VSYW5nZXNGZW1hbGUgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gICAgICAgICAgICB0aGlzLmFnZVJhbmdlc1Vua25vd24gPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gICAgICAgICAgICB0aGlzLmludmVzdG1lbnRzID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgICAgICAgICAgdGhpcy5idXNpbmVzc093bmVyID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgICAgICAgICAgdGhpcy5lZHVjYXRpb24gPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gICAgICAgICAgICB0aGlzLm9jY3VwYXRpb25HZW5lcmFsID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgICAgICAgICAgdGhpcy5vY2N1cGF0aW9uRGV0YWlsZWQgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gICAgICAgICAgICB0aGlzLmRvbmF0ZXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG5cclxuICAgICAgICAgICAgLy8gSU5URVJFU1RTXHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJlc3RzUHVyY2hhc2VzID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgICAgICAgICAgdGhpcy5pbnRlcmVzdHNSZWFkaW5nR2VuZXJhbCA9IGtvLm9ic2VydmFibGVBcnJheShbXSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJlc3RzUmVhZGluZ01hZ2F6aW5lc0FuZFN1YnNjcmlwdGlvbnMgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gICAgICAgICAgICB0aGlzLmludGVyZXN0c1Nwb3J0cyA9IGtvLm9ic2VydmFibGVBcnJheShbXSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJlc3RzRml0bmVzcyA9IGtvLm9ic2VydmFibGVBcnJheShbXSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJlc3RzT3V0ZG9vcnMgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9UT0RPOiBOZWVkIG1ldGhvZCB0aGF0IGFjY2VwdHMgSnNvbiBnZW5lcmF0ZWQgYnkgZGF0YSgpIGFuZCBwb3B1bGF0ZXMgVUlcclxuICAgICAgICAvLyBtYXBzIGpzb24gdG8gTGlzdENyaWV0cmlhIG1vZGVsXHJcbiAgICAgICAgLy8gdGhpcyBtZXRob2QgZG9lcyBub3QgcXVpdGUgd29ya1xyXG4gICAgICAgIC8vICBpc3N1ZSBpcyBzb2VtIGVsZW1lbnRzIG9mIHRoZSBVSSBhcmUgZHluYW1pY2FsbHkgZ2VuZXJhdGVkIGFuZCBjYW4ndCBiZSBjaGVja2VkIGJlY3Vhc2UgdGhleSBhcmVuJ3QgcHJlc2VudFxyXG4gICAgICAgIC8vICBleGFtcGxlOiB0byBzZWxlY3QgYSBjaXR5LCBzdGF0ZSBtdXN0IGJlIHNlbGVjdGVkIGZpcnN0LCBpdGVtIG5lZWRzIHRvIGJlIGNoZWNrZWQgaW4gdWlcclxuICAgICAgICAvL2Zyb21Kc29uKGpzb246IGFueSkge1xyXG4gICAgICAgIC8vICAgIGNvbnN0IG8gPSBKU09OLnBhcnNlKGpzb24pO1xyXG4gICAgICAgIC8vICAgIC8vIEdFT0dSQVBIWVxyXG4gICAgICAgIC8vICAgIC8vIGVhY2ggb2YgdGhlc2UgbmVlZCB0byBiZSBydW4gdGhyb3VnaCB0b2dnbGUoKSB0byBhZGQgdGhlbSB0byB0aGUgdWlcclxuICAgICAgICAvLyAgICAvLyBwcm9ibGVtIGlzIHdlIGRvbid0IGtub3cgdGhlIGlkIGxpc3RlZCBpbiB0aGUgdWlcclxuICAgICAgICAvLyAgICAvLyBpdGVtcyBsaWtlIENpdHksIENvdW50eSwgWmlwIHJlcXVpcmUgdGhlIG9uY2xpY2sgZXZlbnRzIG9uIHRoZSBTdGF0ZSBkcm9wdyBkb3duIHRvIGJlIHJ1blxyXG5cclxuICAgICAgICAvLyAgICBpZiAoby5TdGF0ZXMgJiYgby5TdGF0ZXMubGVuZ3RoID4gMCkgJC5lYWNoKG8uU3RhdGVzLCAoaywgdikgPT4ge1xyXG5cclxuICAgICAgICAvLyAgICAgICAgdGhpcy5zdGF0ZXMucHVzaChuZXcgU3RhdGUodi5BYmJyZXZpYXRpb24sIHYuRmlwcywgdi5TdGF0ZUZ1bGxOYW1lKSk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICAgICAgLy8gICAgaWYgKG8uQ291bnRpZXMgJiYgby5Db3VudGllcy5sZW5ndGggPiAwKSAkLmVhY2goby5Db3VudGllcywgKGssIHYpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgdGhpcy5jb3VudGllcy5wdXNoKG5ldyBDb3VudHkodi5OYW1lLCB2LkZpcHMsIG5ldyBTdGF0ZSh2LlN0YXRlLlN0YXRlRnVsbE5hbWUsIHYuU3RhdGUuRmlwcykpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5aaXBzICYmIG8uWmlwcy5sZW5ndGggPiAwKSAkLmVhY2goby5aaXBzLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLnppcHMucHVzaChuZXcgWmlwKHYuTmFtZSwgbmV3IFN0YXRlKHYuU3RhdGUuU3RhdGVGdWxsTmFtZSwgdi5TdGF0ZS5GaXBzKSkpO1xyXG4gICAgICAgIC8vICAgIH0pO1xyXG4gICAgICAgIC8vICAgIGlmIChvLkNpdGllcyAmJiBvLkNpdGllcy5sZW5ndGggPiAwKSAkLmVhY2goby5DaXRpZXMsIChrLCB2KSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgIC8vIGlmIGxhc3QgdGhlbiB0cmlnZ2VyIFxyXG4gICAgICAgIC8vICAgICAgICB0aGlzLnppcHMucHVzaChuZXcgQ2l0eSh2Lk5hbWUsIG5ldyBTdGF0ZSh2LlN0YXRlLlN0YXRlRnVsbE5hbWUsIHYuU3RhdGUuRmlwcykpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5UaW1lWm9uZXMgJiYgby5UaW1lWm9uZXMubGVuZ3RoID4gMCkgJC5lYWNoKG8uVGltZVpvbmVzLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLnRpbWVab25lcy5wdXNoKG5ldyBWYWx1ZUxhYmVsKHYuTmFtZSwgdi5MYWJlbCkpO1xyXG4gICAgICAgIC8vICAgIH0pO1xyXG4gICAgICAgIC8vICAgIC8vIERFTU9HUkFQSElDU1xyXG4gICAgICAgIC8vICAgIGlmIChvLkFnZVJhbmdlcyAmJiBvLkFnZVJhbmdlcy5sZW5ndGggPiAwKSAkLmVhY2goby5BZ2VSYW5nZXMsIChrLCB2KSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgIHRoaXMuYWdlUmFuZ2VzLnB1c2gobmV3IFZhbHVlTGFiZWwodi5OYW1lLCB2LkxhYmVsKSk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICAgICAgLy8gICAgaWYgKG8uRG9iUmFuZ2VzICYmIG8uRG9iUmFuZ2VzLmxlbmd0aCA+IDApICQuZWFjaChvLkRvYlJhbmdlcywgKGssIHYpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgdGhpcy5kb2JSYW5nZXMucHVzaChuZXcgRG9iUmFuZ2UobmV3IERvYih2LnN0YXJ0KSwgbmV3IERvYih2LmVuZCkpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5FeGFjdEFnZXMgJiYgby5FeGFjdEFnZXMubGVuZ3RoID4gMCkgJC5lYWNoKG8uRXhhY3RBZ2VzLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLmV4YWN0QWdlcy5wdXNoKG5ldyBWYWx1ZUxhYmVsKHYuTmFtZSwgdi5MYWJlbCkpO1xyXG4gICAgICAgIC8vICAgIH0pO1xyXG4gICAgICAgIC8vICAgIGlmIChvLkdlbmRlciAmJiBvLkdlbmRlci5sZW5ndGggPiAwKSAkLmVhY2goby5HZW5kZXIsIChrLCB2KSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgIHRoaXMuZ2VuZGVyLnB1c2gobmV3IFZhbHVlTGFiZWwodi5OYW1lLCB2LkxhYmVsKSk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICAgICAgLy8gICAgaWYgKG8uTWFyaXRhbFN0YXR1cyAmJiBvLk1hcml0YWxTdGF0dXMubGVuZ3RoID4gMCkgJC5lYWNoKG8uTWFyaXRhbFN0YXR1cywgKGssIHYpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgdGhpcy5tYXJpdGFsU3RhdHVzLnB1c2gobmV3IFZhbHVlTGFiZWwodi5OYW1lLCB2LkxhYmVsKSk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICAgICAgLy8gICAgaWYgKG8uSG9oICYmIG8uSG9oLmxlbmd0aCA+IDApICQuZWFjaChvLkhvaCwgKGssIHYpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgdGhpcy5ob2gucHVzaChuZXcgVmFsdWVMYWJlbCh2Lk5hbWUsIHYuTGFiZWwpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5MYW5ndWFnZXMgJiYgby5MYW5ndWFnZXMubGVuZ3RoID4gMCkgJC5lYWNoKG8uTGFuZ3VhZ2VzLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLmxhbmd1YWdlcy5wdXNoKG5ldyBWYWx1ZUxhYmVsKHYuTmFtZSwgdi5MYWJlbCkpO1xyXG4gICAgICAgIC8vICAgIH0pO1xyXG4gICAgICAgIC8vICAgIC8vIEhPVVNJTkcgJiBGSU5BTkNFXHJcbiAgICAgICAgLy8gICAgaWYgKG8uTmV0V29ydGggJiYgby5OZXRXb3J0aC5sZW5ndGggPiAwKSAkLmVhY2goby5OZXRXb3J0aCwgKGssIHYpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgdGhpcy5uZXRXb3J0aC5wdXNoKG5ldyBWYWx1ZUxhYmVsKHYuTmFtZSwgdi5MYWJlbCkpO1xyXG4gICAgICAgIC8vICAgIH0pO1xyXG4gICAgICAgIC8vICAgIGlmIChvLkVzdEluY29tZSAmJiBvLkVzdEluY29tZS5sZW5ndGggPiAwKSAkLmVhY2goby5Fc3RJbmNvbWUsIChrLCB2KSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgIHRoaXMuZXN0SW5jb21lLnB1c2gobmV3IFZhbHVlTGFiZWwodi5OYW1lLCB2LkxhYmVsKSk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICAgICAgLy8gICAgaWYgKG8uSG9tZVZhbHVlICYmIG8uSG9tZVZhbHVlLmxlbmd0aCA+IDApICQuZWFjaChvLkhvbWVWYWx1ZSwgKGssIHYpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgdGhpcy5ob21lVmFsdWUucHVzaChuZXcgVmFsdWVMYWJlbCh2Lk5hbWUsIHYuTGFiZWwpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5Pd25SZW50ICYmIG8uT3duUmVudC5sZW5ndGggPiAwKSAkLmVhY2goby5Pd25SZW50LCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLm93blJlbnQucHVzaChuZXcgVmFsdWVMYWJlbCh2Lk5hbWUsIHYuTGFiZWwpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5JbnZlc3RtZW50RXN0aW1hdGVkUmVzaWRlbnRpYWxQcm9wZXJ0aWVzT3duZWQgJiYgby5JbnZlc3RtZW50RXN0aW1hdGVkUmVzaWRlbnRpYWxQcm9wZXJ0aWVzT3duZWQubGVuZ3RoID4gMCkgJC5lYWNoKG8uSW52ZXN0bWVudEVzdGltYXRlZFJlc2lkZW50aWFsUHJvcGVydGllc093bmVkLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLmludmVzdG1lbnRFc3RpbWF0ZWRSZXNpZGVudGlhbFByb3BlcnRpZXNPd25lZC5wdXNoKG5ldyBWYWx1ZUxhYmVsKHYuTmFtZSwgdi5MYWJlbCkpO1xyXG4gICAgICAgIC8vICAgIH0pO1xyXG4gICAgICAgIC8vICAgIGlmIChvLkxlbmd0aE9mUmVzaWRlbmNlICYmIG8uTGVuZ3RoT2ZSZXNpZGVuY2UubGVuZ3RoID4gMCkgJC5lYWNoKG8uTGVuZ3RoT2ZSZXNpZGVuY2UsIChrLCB2KSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgIHRoaXMubGVuZ3RoT2ZSZXNpZGVuY2UucHVzaChuZXcgVmFsdWVMYWJlbCh2Lk5hbWUsIHYuTGFiZWwpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5Ib3VzZWhvbGRTaXplICYmIG8uSG91c2Vob2xkU2l6ZS5sZW5ndGggPiAwKSAkLmVhY2goby5Ib3VzZWhvbGRTaXplLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLmhvdXNlaG9sZFNpemUucHVzaChuZXcgVmFsdWVMYWJlbCh2Lk5hbWUsIHYuTGFiZWwpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5OdW1iZXJPZkFkdWx0cyAmJiBvLk51bWJlck9mQWR1bHRzLmxlbmd0aCA+IDApICQuZWFjaChvLk51bWJlck9mQWR1bHRzLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLm51bWJlck9mQWR1bHRzLnB1c2gobmV3IFZhbHVlTGFiZWwodi5OYW1lLCB2LkxhYmVsKSk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICAgICAgLy8gICAgaWYgKG8uQWdlUmFuZ2VzTWFsZSAmJiBvLkFnZVJhbmdlc01hbGUubGVuZ3RoID4gMCkgJC5lYWNoKG8uQWdlUmFuZ2VzTWFsZSwgKGssIHYpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgdGhpcy5hZ2VSYW5nZXNNYWxlLnB1c2gobmV3IFZhbHVlTGFiZWwodi5OYW1lLCB2LkxhYmVsKSk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICAgICAgLy8gICAgaWYgKG8uQWdlUmFuZ2VzRmVtYWxlICYmIG8uQWdlUmFuZ2VzRmVtYWxlLmxlbmd0aCA+IDApICQuZWFjaChvLkFnZVJhbmdlc0ZlbWFsZSwgKGssIHYpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgdGhpcy5hZ2VSYW5nZXNGZW1hbGUucHVzaChuZXcgVmFsdWVMYWJlbCh2Lk5hbWUsIHYuTGFiZWwpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5BZ2VSYW5nZXNVbmtub3duICYmIG8uQWdlUmFuZ2VzVW5rbm93bi5sZW5ndGggPiAwKSAkLmVhY2goby5BZ2VSYW5nZXNVbmtub3duLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLmFnZVJhbmdlc1Vua25vd24ucHVzaChuZXcgVmFsdWVMYWJlbCh2Lk5hbWUsIHYuTGFiZWwpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5JbnZlc3RtZW50cyAmJiBvLkludmVzdG1lbnRzLmxlbmd0aCA+IDApICQuZWFjaChvLkludmVzdG1lbnRzLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLmludmVzdG1lbnRzLnB1c2gobmV3IFZhbHVlTGFiZWwodi5OYW1lLCB2LkxhYmVsKSk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICAgICAgLy8gICAgaWYgKG8uQnVzaW5lc3NPd25lciAmJiBvLkJ1c2luZXNzT3duZXIubGVuZ3RoID4gMCkgJC5lYWNoKG8uQnVzaW5lc3NPd25lciwgKGssIHYpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgdGhpcy5idXNpbmVzc093bmVyLnB1c2gobmV3IFZhbHVlTGFiZWwodi5OYW1lLCB2LkxhYmVsKSk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICAgICAgLy8gICAgaWYgKG8uRWR1Y2F0aW9uICYmIG8uRWR1Y2F0aW9uLmxlbmd0aCA+IDApICQuZWFjaChvLkVkdWNhdGlvbiwgKGssIHYpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgdGhpcy5lZHVjYXRpb24ucHVzaChuZXcgVmFsdWVMYWJlbCh2Lk5hbWUsIHYuTGFiZWwpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5PY2N1cGF0aW9uR2VuZXJhbCAmJiBvLk9jY3VwYXRpb25HZW5lcmFsLmxlbmd0aCA+IDApICQuZWFjaChvLk9jY3VwYXRpb25HZW5lcmFsLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLm9jY3VwYXRpb25HZW5lcmFsLnB1c2gobmV3IFZhbHVlTGFiZWwodi5OYW1lLCB2LkxhYmVsKSk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICAgICAgLy8gICAgaWYgKG8uT2NjdXBhdGlvbkRldGFpbGVkICYmIG8uT2NjdXBhdGlvbkRldGFpbGVkLmxlbmd0aCA+IDApICQuZWFjaChvLk9jY3VwYXRpb25EZXRhaWxlZCwgKGssIHYpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgdGhpcy5vY2N1cGF0aW9uRGV0YWlsZWQucHVzaChuZXcgVmFsdWVMYWJlbCh2Lk5hbWUsIHYuTGFiZWwpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5Eb25hdGVzICYmIG8uRG9uYXRlcy5sZW5ndGggPiAwKSAkLmVhY2goby5Eb25hdGVzLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLmRvbmF0ZXMucHVzaChuZXcgVmFsdWVMYWJlbCh2Lk5hbWUsIHYuTGFiZWwpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICAvLyBJTlRFUkVTVFNcclxuICAgICAgICAvLyAgICBpZiAoby5JbnRlcmVzdHNQdXJjaGFzZXMgJiYgby5JbnRlcmVzdHNQdXJjaGFzZXMubGVuZ3RoID4gMCkgJC5lYWNoKG8uSW50ZXJlc3RzUHVyY2hhc2VzLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLmludGVyZXN0c1B1cmNoYXNlcy5wdXNoKG5ldyBWYWx1ZUxhYmVsKHYuTmFtZSwgdi5MYWJlbCkpO1xyXG4gICAgICAgIC8vICAgIH0pO1xyXG4gICAgICAgIC8vICAgIGlmIChvLkludGVyZXN0c1JlYWRpbmdHZW5lcmFsICYmIG8uSW50ZXJlc3RzUmVhZGluZ0dlbmVyYWwubGVuZ3RoID4gMCkgJC5lYWNoKG8uSW50ZXJlc3RzUmVhZGluZ0dlbmVyYWwsIChrLCB2KSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgIHRoaXMuaW50ZXJlc3RzUmVhZGluZ0dlbmVyYWwucHVzaChuZXcgVmFsdWVMYWJlbCh2Lk5hbWUsIHYuTGFiZWwpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5JbnRlcmVzdHNSZWFkaW5nTWFnYXppbmVzQW5kU3Vic2NyaXB0aW9ucyAmJiBvLkludGVyZXN0c1JlYWRpbmdNYWdhemluZXNBbmRTdWJzY3JpcHRpb25zLmxlbmd0aCA+IDApICQuZWFjaChvLkludGVyZXN0c1JlYWRpbmdNYWdhemluZXNBbmRTdWJzY3JpcHRpb25zLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLmludGVyZXN0c1JlYWRpbmdNYWdhemluZXNBbmRTdWJzY3JpcHRpb25zLnB1c2gobmV3IFZhbHVlTGFiZWwodi5OYW1lLCB2LkxhYmVsKSk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICAgICAgLy8gICAgaWYgKG8uSW50ZXJlc3RzU3BvcnRzICYmIG8uSW50ZXJlc3RzU3BvcnRzLmxlbmd0aCA+IDApICQuZWFjaChvLkludGVyZXN0c1Nwb3J0cywgKGssIHYpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgdGhpcy5pbnRlcmVzdHNTcG9ydHMucHVzaChuZXcgVmFsdWVMYWJlbCh2Lk5hbWUsIHYuTGFiZWwpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5JbnRlcmVzdHNGaXRuZXNzICYmIG8uSW50ZXJlc3RzRml0bmVzcy5sZW5ndGggPiAwKSAkLmVhY2goby5JbnRlcmVzdHNGaXRuZXNzLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLmludGVyZXN0c0ZpdG5lc3MucHVzaChuZXcgVmFsdWVMYWJlbCh2Lk5hbWUsIHYuTGFiZWwpKTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvLyAgICBpZiAoby5JbnRlcmVzdHNPdXRkb29ycyAmJiBvLkludGVyZXN0c091dGRvb3JzLmxlbmd0aCA+IDApICQuZWFjaChvLkludGVyZXN0c091dGRvb3JzLCAoaywgdikgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLmludGVyZXN0c091dGRvb3JzLnB1c2gobmV3IFZhbHVlTGFiZWwodi5OYW1lLCB2LkxhYmVsKSk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIC8vIEhFTFBFUlNcclxuICAgICAgICAvLyBUT0RPOiBKc29uIHNob3VsZCBub3Qgc2VuZCBlbXB0eSBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIGRhdGEoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IHRoaXMucmVxdWVzdElkLFxyXG4gICAgICAgICAgICAgICAgLy8gR0VPR1JBUEhZXHJcbiAgICAgICAgICAgICAgICBzdGF0ZXM6IHRoaXMuc3RhdGVzLFxyXG4gICAgICAgICAgICAgICAgY291bnRpZXM6IHRoaXMuY291bnRpZXMsXHJcbiAgICAgICAgICAgICAgICB6aXBzOiB0aGlzLnppcHMsXHJcbiAgICAgICAgICAgICAgICBjaXRpZXM6IHRoaXMuY2l0aWVzLFxyXG4gICAgICAgICAgICAgICAgdGltZVpvbmVzOiB0aGlzLnRpbWVab25lcyxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBERU1PR1JBSElDU1xyXG4gICAgICAgICAgICAgICAgYWdlUmFuZ2VzOiB0aGlzLmFnZVJhbmdlcyxcclxuICAgICAgICAgICAgICAgIGV4YWN0QWdlczogdGhpcy5leGFjdEFnZXMsXHJcbiAgICAgICAgICAgICAgICBkb2JSYW5nZXM6IHRoaXMuZG9iUmFuZ2VzLFxyXG4gICAgICAgICAgICAgICAgZ2VuZGVyOiB0aGlzLmdlbmRlcixcclxuICAgICAgICAgICAgICAgIG1hcml0YWxTdGF0dXM6IHRoaXMubWFyaXRhbFN0YXR1cyxcclxuICAgICAgICAgICAgICAgIGxhbmd1YWdlczogdGhpcy5sYW5ndWFnZXMsXHJcbiAgICAgICAgICAgICAgICBob2g6IHRoaXMuaG9oLFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEhPVVNJTkcgJiBGSU5BTkNFXHJcbiAgICAgICAgICAgICAgICBlc3RJbmNvbWU6IHRoaXMuZXN0SW5jb21lLFxyXG4gICAgICAgICAgICAgICAgbmV0V29ydGg6IHRoaXMubmV0V29ydGgsXHJcbiAgICAgICAgICAgICAgICBob21lVmFsdWU6IHRoaXMuaG9tZVZhbHVlLFxyXG4gICAgICAgICAgICAgICAgb3duUmVudDogdGhpcy5vd25SZW50LFxyXG4gICAgICAgICAgICAgICAgaW52ZXN0bWVudEVzdGltYXRlZFJlc2lkZW50aWFsUHJvcGVydGllc093bmVkOiB0aGlzLmludmVzdG1lbnRFc3RpbWF0ZWRSZXNpZGVudGlhbFByb3BlcnRpZXNPd25lZCxcclxuICAgICAgICAgICAgICAgIGxlbmd0aE9mUmVzaWRlbmNlOiB0aGlzLmxlbmd0aE9mUmVzaWRlbmNlLFxyXG4gICAgICAgICAgICAgICAgLy9ob3VzZWhvbGRTaXplOiB0aGlzLmhvdXNlaG9sZFNpemUsIC0tIG5vdCBpbiBkYXRhYmFzZVxyXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZBZHVsdHM6IHRoaXMubnVtYmVyT2ZBZHVsdHMsXHJcbiAgICAgICAgICAgICAgICBhZ2VSYW5nZXNNYWxlOiB0aGlzLmFnZVJhbmdlc01hbGUsXHJcbiAgICAgICAgICAgICAgICBhZ2VSYW5nZXNGZW1hbGU6IHRoaXMuYWdlUmFuZ2VzRmVtYWxlLFxyXG4gICAgICAgICAgICAgICAgYWdlUmFuZ2VzVW5rbm93bjogdGhpcy5hZ2VSYW5nZXNVbmtub3duLFxyXG4gICAgICAgICAgICAgICAgaW52ZXN0bWVudHM6IHRoaXMuaW52ZXN0bWVudHMsXHJcbiAgICAgICAgICAgICAgICBidXNpbmVzc093bmVyOiB0aGlzLmJ1c2luZXNzT3duZXIsXHJcbiAgICAgICAgICAgICAgICBlZHVjYXRpb246IHRoaXMuZWR1Y2F0aW9uLFxyXG4gICAgICAgICAgICAgICAgb2NjdXBhdGlvbkdlbmVyYWw6IHRoaXMub2NjdXBhdGlvbkdlbmVyYWwsXHJcbiAgICAgICAgICAgICAgICBvY2N1cGF0aW9uRGV0YWlsZWQ6IHRoaXMub2NjdXBhdGlvbkRldGFpbGVkLFxyXG4gICAgICAgICAgICAgICAgZG9uYXRlczogdGhpcy5kb25hdGVzLFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIElOVEVSRVNUU1xyXG4gICAgICAgICAgICAgICAgaW50ZXJlc3RzUHVyY2hhc2VzOiB0aGlzLmludGVyZXN0c1B1cmNoYXNlcyxcclxuICAgICAgICAgICAgICAgIGludGVyZXN0c1JlYWRpbmdHZW5lcmFsOiB0aGlzLmludGVyZXN0c1JlYWRpbmdHZW5lcmFsLFxyXG4gICAgICAgICAgICAgICAgaW50ZXJlc3RzUmVhZGluZ01hZ2F6aW5lc0FuZFN1YnNjcmlwdGlvbnM6IHRoaXMuaW50ZXJlc3RzUmVhZGluZ01hZ2F6aW5lc0FuZFN1YnNjcmlwdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBpbnRlcmVzdHNTcG9ydHM6IHRoaXMuaW50ZXJlc3RzU3BvcnRzLFxyXG4gICAgICAgICAgICAgICAgaW50ZXJlc3RzRml0bmVzczogdGhpcy5pbnRlcmVzdHNGaXRuZXNzLFxyXG4gICAgICAgICAgICAgICAgaW50ZXJlc3RzT3V0ZG9vcnM6IHRoaXMuaW50ZXJlc3RzT3V0ZG9vcnNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFkZHMvcmVtb3ZlcyBpdGVtIGZyb20gY29sbGVjdGlvblxyXG4gICAgICAgIHRvZ2dsZShlKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBhdHRyaWJ1dGUgY29sbGVjdGlvbiBuYW1lXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBlLmN1cnJlbnRUYXJnZXQubmFtZTtcclxuICAgICAgICAgICAgLy8gQ29sbGVjdGlvbiBpcyB3aGljaCB2YWx1ZSB3aWxsIGJlIGFkZGVkIG9yIHJlbW92ZWRcclxuICAgICAgICAgICAgY29uc3QgY29sbCA9IHRoaXNbbmFtZV07XHJcblxyXG4gICAgICAgICAgICAvLyBwYXJzZSBKc29uIHZhbHVlIGludG8gb2JqXHJcbiAgICAgICAgICAgIGxldCBvYmo6IGFueTtcclxuICAgICAgICAgICAgc3dpdGNoIChlLmN1cnJlbnRUYXJnZXQudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNlbGVjdC1vbmVcIjpcclxuICAgICAgICAgICAgICAgICAgICAvLyBzcGFjaWFsIGNhc2UgbmVlZGVkIGJlY2F1c2UgdGFyZ2V0IGlzIFNlbGVjdCBidXQganNvbiBpcyBzdG9yZWQgaW4gc3ViYm9yZGluYXRlIE9wdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbC5yZW1vdmVBbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHsgLy8gZXhlY3V0ZWQgd2hlbiBvcHRpb24gdmFsdWUgaXMgcG9wdWFsdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IEpTT04ucGFyc2UodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgYW55IGV4aXN0aW5nIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsLnJlbW92ZUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsLnB1c2gob2JqKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHBhcnNlcyBjaGVja2JveGVzIGFuZCB0aGUgYnV0dG9ucyB1c2VkIGluIGxpc3RDcml0ZXJpYVZpZXdNb2RlbERpc3BsYXlcclxuICAgICAgICAgICAgICAgICAgICBvYmogPSBKU09OLnBhcnNlKGUuY3VycmVudFRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2tib3hlcyBvbmx5IGFmZmVjdGVkIGJ5IHRoaXMgYmxvY2tcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQpIHsgIC8vIGFkZCB0byBjb2xsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBpdGVtIHRvIGFwcHJvcHJpYXRlIGNvbGxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbC5wdXNoKG9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gYnV0dG9ucyB3aWxsIGJlIGFmZmVjdGVkIGJ5IHRoaXMgYmxvY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGV4aXN0aW5nIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbC5yZW1vdmUoaXRlbSA9PiBpdGVtLmlkID09PSBvYmouaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGFmZmVjdHMgY2hlY2tib3ggZWxlbWVudHMgaW4gdGhlIFVJIHRoYXQgYXJlIGNoZWNrZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChlLnZpZXcuZG9jdW1lbnQpLmZpbmQoYCMke29iai5pZH1gKS5wcm9wKFwiY2hlY2tlZFwiLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB2YWx1ZSBvZiBzZWxlY3QgYmFjayB0byBub3RoaW5nIGlmIG9uZSBpcyBwcmVzZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZS52aWV3LmRvY3VtZW50KS5maW5kKGBbbmFtZT0ke25hbWV9XSBvcHRpb25bdmFsdWU9XCJcIl1gKS5wcm9wKFwic2VsZWN0ZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvdW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUT0RPOiBjbGVhciBjb2xsZWN0aW9uc1xyXG4gICAgICAgIHJlbW92ZUFsbEl0ZW1zKCkge1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBUT0RPOiB1bmNoZWNrIGNyaXRlcmlhIHRoYXQgdXNlcyBjaGVja2JveGVzICBcclxuICAgICAgICAgICAgLy8gc2V0IGNvdW50ID0gMFxyXG4gICAgICAgICAgICB0aGlzLmNvdW50KDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIGxpc3QgY291bnRcclxuICAgICAgICB1cGRhdGVDb3VudCgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1cGRhdGVDb3VudCBjYWxsZWRcIik7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHVwZGF0ZSBsaXN0IGNvdW50IHVzaW5nIExpc3RDcml0ZXJpYVxyXG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgY29uc29sZS5sb2coa28udG9KU09OKHRoaXMuZGF0YSgpKSk7XHJcbiAgICAgICAgICAgICQoXCIjdXBkYXRlQ291bnRMb2FkaW5nXCIpLnNob3coKTtcclxuICAgICAgICAgICAgJC5hamF4KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogdGhpcy5nZXRVcmwoXCJHZW5lcmF0ZUxpc3RDb3VudFwiKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGxpc3RDcml0ZXJpYToga28udG9KU09OKHRoaXMuZGF0YSgpKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coa28udG9KU09OKHJlc3BvbnNlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5IdHRwU3RhdHVzQ29kZVJlc3VsdCA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvdW50KHJlc3BvbnNlLkNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5IdHRwU3RhdHVzQ29kZVJlc3VsdCA9PT0gNDAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvdW50KHJlc3BvbnNlLkNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgKGRhdGEuTWVzc2FnZSAhPT0gXCJcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyQoXCIjbGlzdENyaXRlcmlhRGlzcGxheVwiKS5wcmVwZW5kKFwiPGRpdiBzdHlsZT1cXFwicGFkZGluZzogOHB4O1xcXCIgY2xhc3M9XFxcImFsZXJ0IGFsZXJ0LXdhcm5pbmdcXFwiIGlkPVxcXCJtZXNzYWdlXFxcIj5cIiArIGRhdGEuTWVzc2FnZSArIFwiPC9kaXY+XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb3VudChyZXNwb25zZS5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmIChkYXRhLk1lc3NhZ2UgIT0gJycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kKFwiI2xpc3RDcml0ZXJpYURpc3BsYXlcIikucHJlcGVuZChcIjxkaXYgc3R5bGU9XFxcInBhZGRpbmc6IDhweDtcXFwiIGNsYXNzPVxcXCJhbGVydCBhbGVydC1kYW5nZXJcXFwiIGlkPVxcXCJtZXNzYWdlXFxcIj5cIiArIGRhdGEuTWVzc2FnZSArIFwiPC9kaXY+XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8kKCcjbGlzdENvdW50V2FpdGluZycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiN1cGRhdGVDb3VudExvYWRpbmdcIikuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9ICAgXHJcblxyXG4gICAgICAgIC8vIGFkZCBleGFjdCBhZ2VcclxuICAgICAgICBhZGRFeGFjdEFnZSA9IChkYXRhOiBhbnksIGV2ZW50OiBhbnkpID0+IHsgLy8gdXNlIG9mIGFycm93IGZ1bmN0aW9uIGVuc3VyZXMgdGhpcyA9IHRoaXMgY2xhc3MgaW5zdGVhZCBvZiB0aGUgY2FsbGVyIHdoaWNoIGlzIHRoZSAkcGFyZW50XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYWRkRXhhY3RBZ2UgY2FsbGVkXCIpO1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgdGFyZWd0VmFsdWUgPSAkKHRhcmdldC5wYXJlbnROb2RlKS5maW5kKFwiI2V4YWN0QWdlXCIpLnZhbCgpO1xyXG4gICAgICAgICAgICAkKHRhcmdldC5wYXJlbnROb2RlKS5maW5kKFwiI2FsZXJ0TWVzc2FnZVwiKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgLy8gdmVyaWZ5IGFnZSBpcyAxOCBvciBvbGRlclxyXG4gICAgICAgICAgICBpZiAodGFyZWd0VmFsdWUgPCAxOCkge1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgPGRpdiBzdHlsZT0nY29sb3I6IHJlZDsgbWFyZ2luLXRvcDogMTVweDsnIGlkPVwiYWxlcnRNZXNzYWdlXCI+QWdlIG11c3QgYmUgMTggb3Igb2xkZXIuPC9kaXY+YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdmVyaWZ5IGFnZSBpcyBub3QgYWxyZWFkeSBpbiBjb2xsZWNpdG9uXHJcbiAgICAgICAgICAgIGlmIChrby51dGlscy5hcnJheUZpcnN0KHZpZXdNb2RlbDEubGlzdENyaXRlcmlhVmlld01vZGVsLmV4YWN0QWdlcygpLCBpdGVtID0+IGl0ZW0ubmFtZSA9PT0gdGFyZWd0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldC5wYXJlbnROb2RlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgYDxkaXYgc3R5bGU9J2NvbG9yOiByZWQ7IG1hcmdpbi10b3A6IDE1cHg7JyBpZD1cImFsZXJ0TWVzc2FnZVwiPlRoZSBleGFjdCBhZ2UgJHt0YXJlZ3RWYWx1ZX0gaGFzIGFscmVhZHkgYmVlbiBhZGRlZC48L2Rpdj5gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmV4YWN0QWdlcy5wdXNoKG5ldyBMaXN0QnVpbGRlci5WYWx1ZUxhYmVsKHRhcmVndFZhbHVlLCB0YXJlZ3RWYWx1ZSArIFwiIHllYXJzIG9sZFwiKSk7XHJcbiAgICAgICAgICAgICQodGFyZ2V0LnBhcmVudE5vZGUpLmZpbmQoXCIjZXhhY3RBZ2VcIikudmFsKFwiXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvdW50KCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgIC8vIGFkZCBkb2IgcmFuZ2VcclxuICAgICAgICBhZGREb2JSYW5nZSA9IChkYXRhOiBhbnksIGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQ7XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBwcmV2aW91cyB2YWxpZGF0aW9uIG1lc3NhZ2UgaWYgcHJlc2VudFxyXG4gICAgICAgICAgICAkKHRhcmdldC5wYXJlbnROb2RlKS5maW5kKFwiI2FsZXJ0TWVzc2FnZVwiKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgY29uc3QgZG9iU3RhcnQgPSBuZXcgRG9iKCQodGFyZ2V0LnBhcmVudE5vZGUpLmZpbmQoXCIjZG9iX3N0YXJ0XCIpLnZhbCgpKTtcclxuICAgICAgICAgICAgY29uc3QgZG9iRW5kID0gbmV3IERvYigkKHRhcmdldC5wYXJlbnROb2RlKS5maW5kKFwiI2RvYl9lbmRcIikudmFsKCkpO1xyXG4gICAgICAgICAgICAvLyB2YWxpZGF0ZVxyXG4gICAgICAgICAgICBjb25zdCBkb2JSYW5nZSA9IG5ldyBEb2JSYW5nZShkb2JTdGFydCwgZG9iRW5kKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGRvYlJhbmdlLmlzVmFsaWQoKTtcclxuICAgICAgICAgICAgaWYgKCF2YWxpZGF0aW9uLnJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQucGFyZW50Tm9kZSkuYXBwZW5kKGA8ZGl2IHN0eWxlPSdjb2xvcjogcmVkOyBtYXJnaW4tdG9wOiAxNXB4OycgaWQ9XCJhbGVydE1lc3NhZ2VcIj4ke3ZhbGlkYXRpb24ubWVzc2FnZX08L2Rpdj5gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoa28udXRpbHMuYXJyYXlGaXJzdCh2aWV3TW9kZWwxLmxpc3RDcml0ZXJpYVZpZXdNb2RlbC5kb2JSYW5nZXMoKSwgaXRlbSA9PiBpdGVtLnRvU3RyaW5nKCkgPT09IGRvYlJhbmdlLnRvU3RyaW5nKCkpKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldC5wYXJlbnROb2RlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgYDxkaXYgc3R5bGU9J2NvbG9yOiByZWQ7IG1hcmdpbi10b3A6IDE1cHg7JyBpZD1cImFsZXJ0TWVzc2FnZVwiPlRoZSBkb2IgcmFuZ2UgJHtkb2JSYW5nZS50b1N0cmluZygpfSBoYXMgYWxyZWFkeSBiZWVuIGFkZGVkLjwvZGl2PmApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZG9iUmFuZ2VzLnB1c2gobmV3IERvYlJhbmdlKGRvYlN0YXJ0LCBkb2JFbmQpKTtcclxuICAgICAgICAgICAgJCh0YXJnZXQucGFyZW50Tm9kZSkuZmluZChcIiNkb2Jfc3RhcnRcIikudmFsKFwiXCIpO1xyXG4gICAgICAgICAgICAkKHRhcmdldC5wYXJlbnROb2RlKS5maW5kKFwiI2RvYl9lbmRcIikudmFsKFwiXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvdW50KCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgIGFkZFppcHMgPSAoZXZlbnQ6IGFueSwgdm06IGFueSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50O1xyXG4gICAgICAgIHZhciBsaW5lcyA9ICQoZXZlbnQudGFyZ2V0KS52YWwoKS5zcGxpdChcIlxcblwiKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBjb25zdCBpbnB1dFppcCA9IGxpbmVzW2ldLnRyaW0oKTtcclxuICAgICAgICAgIC8vIGlzIHRoaXMgYSB2YWxpZCA1IGRpZ2l0IHppcFxyXG4gICAgICAgICAgaWYgKC9eXFxkezV9JHxeXFxkezV9JC8udGVzdChpbnB1dFppcCkpIHtcclxuICAgICAgICAgICAgLy8gaWYgemlwIGRvZXMgbm90IGV4aXN0IGluIHRoZSBhcnJheSB0aGVuIGFkZCBpdFxyXG4gICAgICAgICAgICBpZiAoalF1ZXJ5LmdyZXAodGhpcy56aXBzKCksIGEgPT4gYS5uYW1lID09PSBpbnB1dFppcCkubGVuZ3RoID09PSAwKVxyXG4gICAgICAgICAgICAgIHRoaXMuemlwcy5wdXNoKG5ldyBaaXAoaW5wdXRaaXAsIG5ldyBTdGF0ZShcIlwiLCAwKSkpO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuemlwcygpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgJCh0YXJnZXQucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgLmFwcGVuZChcclxuICAgICAgICAgICAgICBgPGRpdiBzdHlsZT0nY29sb3I6IHJlZDsgbWFyZ2luLXRvcDogMTVweDsnIGlkPVwiYWxlcnRNZXNzYWdlXCI+WmlwcyBzZWVtcyB0byBiZSBlbXB0eS48L2Rpdj5gKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVDb3VudCgpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gRU5EIEhFTFBFUlNcclxuXHJcbiAgICAgICAgZ2V0VXJsKHVybE5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IGpRdWVyeS5ncmVwKHRoaXMudXJscywgKG4pID0+IG4ubmFtZSA9PT0gdXJsTmFtZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXRjaFswXS51cmw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4iXX0=